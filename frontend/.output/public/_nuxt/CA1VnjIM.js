import{P as F,K as S,r as f,R as g,b as l,aJ as B,aj as C,H as P,x as A,k as D,D as N,c as T,w as r,o as V,d as c,z as h,A as x,B as u,t as y,aa as j,a as E,aB as M,V as _}from"./Bh59aRpc.js";import{V as q,a as z,b as H}from"./cefNi3wq.js";import{j as J,k as K,i as k,V as U}from"./jyi1f3K3.js";import"./DNJGKzx0.js";import"./B4cRk-tp.js";const W=S({...C(),...K()},"VForm"),G=F()({name:"VForm",props:W(),emits:{"update:modelValue":i=>!0,submit:i=>!0},setup(i,p){let{slots:d,emit:n}=p;const t=J(i),o=f();function m(a){a.preventDefault(),t.reset()}function v(a){const e=a,s=t.validate();e.then=s.then.bind(s),e.catch=s.catch.bind(s),e.finally=s.finally.bind(s),n("submit",e),e.defaultPrevented||s.then(w=>{var b;let{valid:R}=w;R&&((b=o.value)==null||b.submit())}),e.preventDefault()}return g(()=>{var a;return l("form",{ref:o,class:["v-form",i.class],style:i.style,novalidate:!0,onReset:m,onSubmit:v},[(a=d.default)==null?void 0:a.call(d,t)])}),B(t,o)}}),I={class:"text-center mt-4"},Z={__name:"reset-password",setup(i){const p=P(),d=A(),n=f(""),t=f(!1),o=f(""),m=f(""),v=async()=>{t.value=!0,o.value="",m.value="";try{await d.postWithString("password-reset/",{email:n.value}),m.value="Инструкции по восстановлению пароля отправлены на ваш email",n.value=""}catch{o.value="Ошибка при отправке запроса на восстановление пароля"}finally{t.value=!1}};return D(()=>{N().isAuthenticated&&p.push("/dashboard")}),(a,e)=>(V(),T("div",null,[l(q,{"max-width":"500",class:"mx-auto"},{default:r(()=>[l(z,{class:"text-h5"},{default:r(()=>e[1]||(e[1]=[c("Восстановление пароля")])),_:1}),l(H,null,{default:r(()=>[u(o)?(V(),h(k,{key:0,type:"error",class:"mb-4"},{default:r(()=>[c(y(u(o)),1)]),_:1})):x("",!0),u(m)?(V(),h(k,{key:1,type:"success",class:"mb-4"},{default:r(()=>[c(y(u(m)),1)]),_:1})):x("",!0),l(G,{onSubmit:j(v,["prevent"])},{default:r(()=>[l(U,{modelValue:u(n),"onUpdate:modelValue":e[0]||(e[0]=s=>M(n)?n.value=s:null),label:"Email",type:"email",required:"","prepend-icon":"mdi-email",variant:"outlined"},null,8,["modelValue"]),l(_,{type:"submit",color:"primary",block:"",loading:u(t),class:"mt-4"},{default:r(()=>[c(y(u(t)?"Отправка...":"Восстановить пароль"),1)]),_:1},8,["loading"]),E("div",I,[l(_,{variant:"text",color:"primary",to:"/login",class:"text-none"},{default:r(()=>e[2]||(e[2]=[c(" Вернуться к входу ")])),_:1})])]),_:1})]),_:1})]),_:1})]))}};export{Z as default};
